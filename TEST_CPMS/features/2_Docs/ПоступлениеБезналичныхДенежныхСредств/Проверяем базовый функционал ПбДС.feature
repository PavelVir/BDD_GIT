#language: ru

@tree

#report.epic=ФункциональныеТесты 
#report.feature=Документы
#report.story= Поступление безналичных денежных средств


Функционал: Проверям базовый функционал Поступления безналичных денежных средств

Контекст:
	Дано я подключаю TestClient "ПолныеПрава" логин "iRobot" пароль ""

Сценарий: Проведение и проводки документа ПбДС

* Загружаем исходные данные
	// Справочник.БанковскиеСчетаОрганизаций
	И я проверяю или создаю для справочника "БанковскиеСчетаОрганизаций" объекты:
		| 'Ссылка'                                                                                | 'ПометкаУдаления' | 'Владелец'                                                               | 'Наименование'                          | 'ВалютаДенежныхСредств'                                             | 'НомерСчета'           | 'Банк'                                                                           | 'ТекстКорреспондента' | 'ТекстНазначения' | 'ВариантВыводаМесяца'                            | 'СрокИсполненияПлатежа' | 'ИспользоватьОбменСБанком' | 'Программа' | 'Кодировка' | 'ФайлЗагрузки' | 'ФайлВыгрузки' | 'РазрешитьПлатежиБезУказанияЗаявок' | 'Подразделение' | 'РучноеИзменениеРеквизитовБанка' | 'НаименованиеБанка' | 'КоррСчетБанка' | 'ГородБанка' | 'АдресБанка' | 'ТелефоныБанка' | 'НаименованиеБанкаДляРасчетов' | 'АдресБанкаДляРасчетов' | 'ТелефоныБанкаДляРасчетов' | 'ГруппаФинансовогоУчета' | 'ОбменСБанкомВключен' | 'СчетУчета'                                                                  | 'СВИФТБанка' | 'КодБанка' | 'ВидСчета' | 'ДатаОткрытия'       | 'ДатаЗакрытия'       | 'НомерИДатаРазрешения' | 'ТипФайла' | 'СВИФТБанкаДляРасчетов' | 'ИностранныйБанк' | 'СчетВБанкеДляРасчетов' | 'Закрыт' | 'НаправлениеДеятельности' | 'НеоперационнаяДеятельность' | 'НомерСчетаУстаревший' | 'кс_Основной' | 'кс_ПроектОрганизации' |
		| 'e1cib/data/Справочник.БанковскиеСчетаОрганизаций?ref=9c0f14dda9e161b811e68b97d109880e' | 'False'           | 'e1cib/data/Справочник.Организации?ref=9c0f14dda9e161b811e68b97d10987ef' | 'ПАТ "УКРГАЗБАНК", м.Київ, Добро (грн)' | 'FindByAttribute:Catalog.Валюты;Код;980' | '40702810200000000792' | 'e1cib/data/Справочник.КлассификаторБанков?ref=9c0f14dda9e161b811e68b97d109880d' | ''                    | ''                | 'Enum.ВариантыВыводаМесяцаВДатеДокумента.Числом' |                         | 'True'                     | ''          | 'Windows'   | ''             | ''             | 'True'                              | ''              | 'False'                          | ''                  | ''              | ''           | ''           | ''              | ''                             | ''                      | ''                         | ''                       | 'True'                | 'e1cib/data/ПланСчетов.Хозрасчетный?refName=ТекущиеСчетаВНациональнойВалюте' | ''           | ''         | 'Текущий'  | '01.01.0001 0:00:00' | '01.01.0001 0:00:00' | ''                     | 'XML'      | ''                      | 'False'           | ''                      | 'False'  | ''                        | 'False'                      | ''                     | 'False'       | ''                     |
	// Справочник.ГруппыФинансовогоУчетаРасчетов
	И я проверяю или создаю для справочника "ГруппыФинансовогоУчетаРасчетов" объекты:
		| 'Ссылка'                                                                                    | 'ПометкаУдаления' | 'Родитель' | 'ЭтоГруппа' | 'Наименование' | 'ПорядокОплаты'                                                 | 'Описание' | 'СчетУчетаРасчетовСКлиентами'                                                   | 'СчетУчетаАвансовПолученных'                                                    | 'СчетУчетаРасчетовПоВознаграждению'                                                        | 'СчетУчетаРасчетовСПоставщиками'                                                | 'СчетУчетаАвансовВыданных'                                                      | 'СчетУчетаРасчетовСКлиентамиТара' | 'СчетУчетаРасчетовСПоставщикамиТара' |
		| 'e1cib/data/Справочник.ГруппыФинансовогоУчетаРасчетов?ref=80ed000c29e0e9f611eb17bb6efe7049' | 'False'           | ''         | 'False'     | 'основное'     | 'Enum.ПорядокОплатыПоСоглашениям.РасчетыВГривнахОплатаВГривнах' | ''         | 'e1cib/data/ПланСчетов.Хозрасчетный?refName=РасчетыСОтечественнымиПокупателями' | 'e1cib/data/ПланСчетов.Хозрасчетный?refName=РасчетыСОтечественнымиПокупателями' | 'e1cib/data/ПланСчетов.Хозрасчетный?refName=РасчетыСДругимиКредиторамиВНациональнойВалюте' | 'e1cib/data/ПланСчетов.Хозрасчетный?refName=РасчетыСОтечественнымиПоставщиками' | 'e1cib/data/ПланСчетов.Хозрасчетный?refName=РасчетыСОтечественнымиПоставщиками' | ''                                | ''                                   |
	// Справочник.ДоговорыКонтрагентов
	И я проверяю или создаю для справочника "ДоговорыКонтрагентов" объекты:
		| 'Ссылка'                                                                          | 'ПометкаУдаления' | 'Наименование' | 'ВалютаВзаиморасчетов'                   | 'Организация'                                                            | 'Контрагент'                                                             | 'НаименованиеДляПечати' | 'Дата'               | 'Номер' | 'Партнер'                                                             | 'Подразделение' | 'ПорядокОплаты'                                                 | 'ПорядокРасчетов'                              | 'Согласован' | 'Статус'                                      | 'ХозяйственнаяОперация'                        | 'ТипДоговора'                     | 'ОграничиватьСуммуЗадолженности' | 'ГруппаФинансовогоУчета'                                                                    | 'ЗапрещаетсяПросроченнаяЗадолженность' | 'Сумма' | 'ЗаданГрафикИсполнения' | 'кс_ДополнительноеСоглашение' | 'кс_ПроектОрганизации'                                               |
		| 'e1cib/data/Справочник.ДоговорыКонтрагентов?ref=80f9000c29e0e9f611ec15218ba7bff1' | 'False'           | '9448'         | 'FindByAttribute:Catalog.Валюты;Код;980' | 'e1cib/data/Справочник.Организации?ref=9c0f14dda9e161b811e68b97d10987ef' | 'e1cib/data/Справочник.Контрагенты?ref=80f9000c29e0e9f611ec152126f2fb42' | '9448'                  | '01.01.2021 0:00:00' | '9448'  | 'e1cib/data/Справочник.Партнеры?ref=80f9000c29e0e9f611ec152126f2fb41' | ''              | 'Enum.ПорядокОплатыПоСоглашениям.РасчетыВГривнахОплатаВГривнах' | 'Enum.ПорядокРасчетов.ПоДоговорамКонтрагентов' | 'True'       | 'Enum.СтатусыДоговоровКонтрагентов.Действует' | 'Enum.ХозяйственныеОперации.РеализацияКлиенту' | 'Enum.ТипыДоговоров.СПокупателем' | 'False'                          | 'e1cib/data/Справочник.ГруппыФинансовогоУчетаРасчетов?ref=80ed000c29e0e9f611eb17bb6efe7049' | 'False'                                | 1200000 | 'True'                  | 'False'                       | 'e1cib/data/Справочник.Проекты?ref=80e9000c29e0e9f611eabb86a75a9ca8' |
	// Справочник.КлассификаторБанков
	И я проверяю или создаю для справочника "КлассификаторБанков" объекты:
		| 'Ссылка'                                                                         | 'ПометкаУдаления' | 'Родитель' | 'ЭтоГруппа' | 'Код'       | 'Наименование'             | 'КоррСчет' | 'Город'  | 'Адрес'              | 'Телефоны' | 'ДеятельностьПрекращена' | 'СВИФТБИК' | 'КодПоЕДРПОУ' |
		| 'e1cib/data/Справочник.КлассификаторБанков?ref=9c0f14dda9e161b811e68b97d109880d' | 'False'           | ''         | 'False'     | '320478   ' | 'ПАТ "УКРГАЗБАНК", м.Київ' | ''         | 'м.Київ' | 'вул. Єреванська, 1' | ''         | 'False'                  | ''         | '23697280'    |
	// Справочник.Контрагенты
	И я проверяю или создаю для справочника "Контрагенты" объекты:
		| 'Ссылка'                                                                 | 'ПометкаУдаления' | 'Наименование'                 | 'ОбособленноеПодразделение' | 'ЮридическоеФизическоеЛицо'                      | 'СтранаРегистрации'                                | 'ГоловнойКонтрагент'                                                     | 'ДополнительнаяИнформация' | 'НаименованиеПолное'           | 'Партнер'                                                             | 'ЮрФизЛицо'              | 'РегистрационныйНомер' | 'ПлательщикНДС' | 'КодПоЕДРПОУ' | 'НомерСвидетельстваПлательщикаНДС' | 'ИННПлательщикаНДС' | 'ДополнятьНаименованиеАдресДаннымиГоловногоКонтрагентаВНН' | 'КодФилиала' | 'ИспользоватьЭДО1СЗвит' | 'кс_ВнутреннийКонтур' |
		| 'e1cib/data/Справочник.Контрагенты?ref=80f9000c29e0e9f611ec152126f2fb42' | 'False'           | 'Гаращенко Елена'              | 'False'                     | 'Enum.ЮридическоеФизическоеЛицо.ФизическоеЛицо'  | 'e1cib/data/Справочник.СтраныМира?refName=Украина' | 'e1cib/data/Справочник.Контрагенты?ref=80f9000c29e0e9f611ec152126f2fb42' | ''                         | 'Гаращенко Елена'              | 'e1cib/data/Справочник.Партнеры?ref=80f9000c29e0e9f611ec152126f2fb41' | 'Enum.ЮрФизЛицо.ФизЛицо' | ''                     | 'False'         | '1258632556'  | ''                                 | ''                  | 'False'                                                    | ''           | 'False'                 | 'False'               |
	// Справочник.кс_ВидыПроектов
	И я проверяю или создаю для справочника "кс_ВидыПроектов" объекты:
		| 'Ссылка'                                                                     | 'ПометкаУдаления' | 'Родитель' | 'ЭтоГруппа' | 'Наименование' | 'кс_УП_ФормироватьЗаданияПоПериодам' | 'кс_УП_СтатьяДоходовУ' | 'кс_УП_СтатьяСебестоимостиУ' |
		| 'e1cib/data/Справочник.кс_ВидыПроектов?ref=80e9000c29e0e9f611eabb89e89d42f8' | 'False'           | ''         | 'False'     | 'вид проекта'  | 'True'                               | ''                     | ''                           |
	// Справочник.Организации
	И я проверяю или создаю для справочника "Организации" объекты:
		| 'Ссылка'                                                                 | 'ПометкаУдаления' | 'Наименование' | 'ГоловнаяОрганизация'                                                    | 'НаименованиеПолное'                              | 'НаименованиеСокращенное' | 'ОбособленноеПодразделение' | 'Префикс' | 'ГрафикРаботыСотрудников'                                                             | 'ЦифровойИндексОбособленногоПодразделения' | 'ЮрФизЛицо'             | 'ЮридическоеФизическоеЛицо'                      | 'ФайлЛоготип' | 'КодПоЕДРПОУ' | 'НалоговаяИнспекция'                                                            | 'ВестиУчетДенежныхСредствПоОбособленнымПодразделениям' | 'НоменклатураЗаполненияНалоговыхНаАванс'                                  | 'ФормироватьИтоговыеНалоговыеВРозницеСводноПоНоменклатуре' | 'МоментОпределенияБазыНДСПоПродажам'                    | 'МоментОпределенияБазыНДСПоЗакупкам'                    | 'МоментОпределенияБазыНДСПоЭкспорту'              |
		| 'e1cib/data/Справочник.Организации?ref=80e9000c29e0e9f611ea68f2044b8c75' | 'False'           | 'Веселка'      | ''                                                                       | 'Веселка'                                         | 'Веселка'                 | 'False'                     | 'В'       | 'e1cib/data/Справочник.ГрафикиРаботыСотрудников?ref=80e00cc47a69053111e7ba3e62f2f472' |                                            | 'Enum.ЮрФизЛицо.ЮрЛицо' | 'Enum.ЮридическоеФизическоеЛицо.ЮридическоеЛицо' | ''            | '12345678'    | ''                                                                              | 'False'                                                | ''                                                                        | 'False'                                                    | 'Enum.МоментыОпределенияНалоговойБазы.ПоПервомуСобытию' | 'Enum.МоментыОпределенияНалоговойБазы.ПоПервомуСобытию' | 'Enum.МоментыОпределенияНалоговойБазы.ПоОтгрузке' |
		| 'e1cib/data/Справочник.Организации?ref=9c0f14dda9e161b811e68b97d10987ef' | 'False'           | 'Добро'        | 'e1cib/data/Справочник.Организации?ref=9c0f14dda9e161b811e68b97d10987ef' | 'Товариство з обмеженою відповідальністю "Добро"' | 'ТОВ "Добро"'             | 'False'                     | 'ДО'      | ''                                                                                    |                                            | 'Enum.ЮрФизЛицо.ЮрЛицо' | 'Enum.ЮридическоеФизическоеЛицо.ЮридическоеЛицо' | ''            | '87009943'    | 'e1cib/data/Справочник.НалоговыеИнспекции?ref=80e50cc47a69053111e7cf717f62c2e0' | 'True'                                                 | 'e1cib/data/Справочник.Номенклатура?ref=9c0f14dda9e161b811e68b97d1098801' | 'False'                                                    | 'Enum.МоментыОпределенияНалоговойБазы.ПоПервомуСобытию' | 'Enum.МоментыОпределенияНалоговойБазы.ПоПервомуСобытию' | 'Enum.МоментыОпределенияНалоговойБазы.ПоОтгрузке' |
	// Справочник.Партнеры
	И я проверяю или создаю для справочника "Партнеры" объекты:
		| 'Ссылка'                                                              | 'ПометкаУдаления' | 'Родитель'                                                  | 'Код'         | 'Наименование'                 | 'ГруппаДоступа'                                                                     | 'ДатаРегистрации'    | 'Клиент' | 'Поставщик' | 'НаименованиеПолное'           | 'ОсновнойМенеджер'                                                        | 'ЮрФизЛицо'                            |
		| 'e1cib/data/Справочник.Партнеры?ref=80f9000c29e0e9f611ec152126f2fb41' | 'False'           | ''                                                          | 'ЦБ-00000039' | 'Гаращенко Елена'              | 'e1cib/data/Справочник.ГруппыДоступаПартнеров?ref=9c1914dda9e161b811e6aa6496f99283' | '14.09.2021 0:00:00' | 'True'   | 'False'     | 'Гаращенко Елена'              | 'e1cib/data/Справочник.Пользователи?ref=9c0f14dda9e161b811e68b97d1098819' | 'Enum.КомпанияЧастноеЛицо.ЧастноеЛицо' |
	// Справочник.Проекты
	И я проверяю или создаю для справочника "Проекты" объекты:
		| 'Ссылка'                                                             | 'ПометкаУдаления' | 'Родитель' | 'ЭтоГруппа' | 'Код'         | 'Наименование' | 'ПлановаяДатаНачала' | 'ДатаНачала'         | 'ПлановаяДатаОкончания' | 'кс_ВидПроекта'                                                              | 'кс_ГоризонтПланирования' | 'кс_ГрафикРаботы'                                                                     | 'кс_Организация'                                                         | 'кс_ПроизвольнаяСтруктураWBS' |
		| 'e1cib/data/Справочник.Проекты?ref=80e9000c29e0e9f611eabb86a75a9ca8' | 'False'           | ''         | 'False'     | 'ЦБ-00000001' | 'Тест'         | '01.01.2022 0:00:00' | '01.01.0001 0:00:00' | '31.12.2025 0:00:00'    | 'e1cib/data/Справочник.кс_ВидыПроектов?ref=80e9000c29e0e9f611eabb89e89d42f8' | 'Enum.Периодичность.День' | 'e1cib/data/Справочник.ГрафикиРаботыСотрудников?ref=80e00cc47a69053111e7ba3e62f2f472' | 'e1cib/data/Справочник.Организации?ref=80e9000c29e0e9f611ea68f2044b8c75' | 'True'                        |
	// Документ.ПоступлениеБезналичныхДенежныхСредств
	И я проверяю или создаю для документа "ПоступлениеБезналичныхДенежныхСредств" объекты:
		| 'Ссылка'                                                                                         | 'ПометкаУдаления' | 'Номер'       | 'Дата'                | 'Проведен' | 'Организация'                                                            | 'БанковскийСчет'                                                                        | 'ТипПлатежногоДокумента'                          | 'ХозяйственнаяОперация'                                 | 'СуммаДокумента' | 'Контрагент'                                                             | 'ДатаВходящегоДокумента' | 'НомерВходящегоДокумента' | 'НазначениеПлатежа'                                                                         | 'Валюта'                                 | 'ПроведеноБанком' | 'ДатаПроведенияБанком' | 'ДокументОснование'                                                                            | 'ФорматированноеНазначениеПлатежа'                        | 'кс_ПроектОрганизации'                                               |
		| 'e1cib/data/Документ.ПоступлениеБезналичныхДенежныхСредств?ref=80f9000c29e0e9f611ec1522f96bc575' | 'False'           | 'ДОЦБ-000019' | '01.01.2021 12:00:00' | 'True'     | 'e1cib/data/Справочник.Организации?ref=9c0f14dda9e161b811e68b97d10987ef' | 'e1cib/data/Справочник.БанковскиеСчетаОрганизаций?ref=9c0f14dda9e161b811e68b97d109880e' | 'Enum.ТипыПлатежныхДокументов.ПлатежноеПоручение' | 'Enum.ХозяйственныеОперации.ПоступлениеОплатыОтКлиента' | 600000           | 'e1cib/data/Справочник.Контрагенты?ref=80f9000c29e0e9f611ec152126f2fb42' | '01.01.2021 0:00:00'     | '0101'                    | 'Оплата от клиента Гаращенко Елена по инвестиционному договору 9448 за  01.01.2021 0:00:00' | 'FindByAttribute:Catalog.Валюты;Код;980' | 'True'            | '01.01.2021 0:00:00'   | 'e1cib/data/Документ.ОжидаемоеПоступлениеДенежныхСредств?ref=80f9000c29e0e9f611ec15216c881ea9' | 'Оплата клиента Гаращенко Елена инвестиционному договору' | 'e1cib/data/Справочник.Проекты?ref=80e9000c29e0e9f611eabb86a75a9ca8' |
	И я перезаполняю для объекта табличную часть "РасшифровкаПлатежа":
		| 'Ссылка'                                                                                         | 'Партнер'                                                             | 'СтатьяДвиженияДенежныхСредств'                                                          | 'ОснованиеПлатежа'                                                                | 'Заказ'                                                                           | 'Сумма' | 'ВалютаВзаиморасчетов'                   | 'СуммаВзаиморасчетов' | 'ИдентификаторСтроки'                  | 'Организация'                                                            | 'кс_Проект'                                                          |
		| 'e1cib/data/Документ.ПоступлениеБезналичныхДенежныхСредств?ref=80f9000c29e0e9f611ec1522f96bc575' | 'e1cib/data/Справочник.Партнеры?ref=80f9000c29e0e9f611ec152126f2fb41' | 'e1cib/data/Справочник.СтатьиДвиженияДенежныхСредств?refName=ПоступлениеОплатыОтКлиента' | 'e1cib/data/Справочник.ДоговорыКонтрагентов?ref=80f9000c29e0e9f611ec15218ba7bff1' | 'e1cib/data/Справочник.ДоговорыКонтрагентов?ref=80f9000c29e0e9f611ec15218ba7bff1' | 600000  | 'FindByAttribute:Catalog.Валюты;Код;980' | 600000                | '49189848-2c73-481f-b8fa-93c9c09c6ee1' | 'e1cib/data/Справочник.Организации?ref=9c0f14dda9e161b811e68b97d10987ef' | 'e1cib/data/Справочник.Проекты?ref=80e9000c29e0e9f611eabb86a75a9ca8' |
	И Я устанавливаю в константу "ИспользоватьДоговорыСКлиентами" значение "ИСТИНА"
	И Я устанавливаю в константу "ИспользоватьСоглашенияСКлиентами" значение "ЛОЖЬ"


* Проводим документ и проверяем проводки
	И Я открываю навигационную ссылку "e1cib/data/Документ.ПоступлениеБезналичныхДенежныхСредств?ref=80f9000c29e0e9f611ec1522f96bc575"
	И я нажимаю на кнопку с именем 'ФормаПровести'
	И я нажимаю на кнопку с именем 'ФормаОбработкаОтражениеДокументовВРеглУчетеПроводкиРеглУчета'
	Тогда открылось окно 'Проводки регламентированного учета'
	И я нажимаю на кнопку с именем 'ФормаОтразитьДокументВРеглУчете'
	И Пауза 1   
	Тогда таблица "НаборЗаписей" содержит строки:
	    | 'Дата'                | 'Организация' | 'Субконто2 Дт'                  | 'Счет Дт' | 'Субконто Дт'                           | 'Счет Кт' | 'Субконто Кт'     | 'Субконто2 Кт' | 'Сумма (грн)' | 'Содержание'                    |
	    | '01.01.2021 12:00:00' | 'Добро'       | 'Поступление оплаты от клиента' | '311'     | 'ПАТ "УКРГАЗБАНК", м.Київ, Добро (грн)' | '361'     | 'Гаращенко Елена' | '9448'         | '600 000,00'  | 'Поступление аванса от клиента' |
			